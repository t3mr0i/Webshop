<!doctype html>
<html>
<link href="../css/style.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<head>
    <meta charset="UTF-8">
    <title>Registrieren</title>
</head>

<body>
<h2>Registrieren.</h2>
<div id="log_in_box">
    <form name="userRegistration" method="post"action="/Webshop/php/user.php">
        <label for="email"></label>
        <input type="text" name="vorname" id="vorname" placeholder="Vorname">
        <br>
        <input type="text" name="name" id="name" placeholder="Name">
        <br>
        <input type="email" name="email" id="email" placeholder="E-Mail Adresse">
        <br>
        <input type="password" name="passwort" id="passwort" placeholder="Passwort">
        <br>
        <input type="password" name="passwort_wiederholen" id="passwort_wiederholen" placeholder="Passwort wiederholen">

        <p id="passwordWarningText"></p>

        <div id="buttonRow">
            <a href="">
                <button class="button1-hidden" type="submit" value="Anmelden" id="signUp">Anmelden
                </button>
            </a>
            <a href="index.html">
                <button class="button3" type="button">Abbrechen</button>
            </a>
        </div>
    </form>
</div>
<script>

    function checkPassword() {
        var passwordInput;
        var secondPasswordInput;
        var firstFieldValid;
        var secondFieldValid;
        passwordInput = document.getElementById("passwort").value;
        secondPasswordInput = document.getElementById("passwort_wiederholen").value;
        var isSamePassword = passwordInput === secondPasswordInput;
        if (RegExp(/^(?=.*\d).{5,}$/).test(passwordInput)) {
            document.getElementById("passwort").className = "valid-password";
            firstFieldValid = true;
        } else {
            firstFieldValid = false;
            document.getElementById('passwordWarningText').innerHTML = "The password has to be atleast 5 characters long and contain one number.";
            document.getElementById("passwort").className = "wrong-password";
        }
        if (RegExp(/^(?=.*\d).{5,}$/).test(secondPasswordInput)) {
            document.getElementById("passwort_wiederholen").className = "valid-password";
            secondFieldValid = true;

        } else {
            if (secondPasswordInput != null && secondPasswordInput !== "") {
                secondFieldValid = false;
                document.getElementById("passwort_wiederholen").className = "wrong-password";
                document.getElementById('passwordWarningText').innerHTML = "The password has to be atleast 5 characters long and contain one number.";
            }
        }
        if (passwordInput === secondPasswordInput && firstFieldValid && secondFieldValid) {
            document.getElementById('passwordWarningText').innerHTML = "";
            document.getElementById('signUp').className = "button1";
        } else {
            document.getElementById('signUp').className = "button1-hidden";

            if (secondPasswordInput !== null && secondPasswordInput !== "" & firstFieldValid && secondFieldValid) {
                document.getElementById("passwort_wiederholen").className = "wrong-password";
                document.getElementById("passwort").className = "wrong-password";
                document.getElementById('passwordWarningText').innerHTML = "The two entered passwords have to match.";
            }
        }

    }

    document.getElementById('passwort').onblur = function () {
        checkPassword();
    };
    document.getElementById('passwort_wiederholen').onblur = function () {
        checkPassword();
        
    };

    document.getElementById('passwort').onfocus = function () {

    };

</script>
</body>
</html>
